<%= form_for @user do |f| %>
<%= invisible_captcha :bucket %>
<%= f.invisible_captcha :bucket %>

  <div class="form-group">
    <%= f.text_field :email, :class => "form-control", :placeholder => 'Email' %>
    <% unless @user.errors[:email].empty? %>
      <p class="text-danger">
        <% @user.errors.full_messages_for(:email).each do |e| %>
          <%= e %><br>
        <% end %>
      </p>
    <% end %>
  </div>

<% if @user.new_record? %>

  <div class="form-group">
    <%= f.password_field :password, :class => "form-control", :placeholder => 'Password' %>
    <% unless @user.errors[:password].empty? %>
      <p class="text-danger">
        <% @user.errors.full_messages_for(:password).each do |e| %>
          <%= e %><br>
        <% end %>
      </p>
    <% end %>
  </div>

  <div class="form-group">
    <%= f.password_field :password_confirmation, :class => "form-control", :placeholder => 'Confirm Password' %>
    <% unless @user.errors[:password_confirmation].empty? %>
      <p class="text-danger">
        <% @user.errors.full_messages_for(:password_confirmation).each do |e| %>
          <%= e %><br>
        <% end %>
      </p>
    <% end %>
  </div>

<% end %>

  <div class="form-group">
    <%= f.text_field :username, :class => "form-control", :placeholder => 'Nickname' %>
    <% unless @user.errors[:username].empty? %>
      <p class="text-danger">
        <% @user.errors.full_messages_for(:username).each do |e| %>
          <%= e %><br>
        <% end %>
      </p>
    <% end %>
  </div>

<% unless f.object.new_record? %>
<div class="checkbox">
  <label><%= f.check_box :is_active %> Account active</label>
</div>
<% end %>

  <div class="form-group">
    <span class="btn-group">
      <% if f.object.new_record? %>
        <% if request.path == registration_path %>
          <% verb = "Register" %>
        <% else %>
          <% verb = "Create" %>
        <% end %>
      <% else %>
        <% verb = "Update" %>
      <% end %>
      <%= f.submit verb, :class => "btn btn-primary" %>
    </span>
  </div>

<% end %>
