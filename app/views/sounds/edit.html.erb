<% @title = "Edit Sound \'#{@sound.name}\'" %>

<div class="page-header">
  <h1>
    <%= @sound.name %>
    <small class="pull-right">
      <span class="btn-group">
        <%= link_to @sound, :method => :delete, :data => { confirm: "It will be deleted immediately and no longer be available on any stages that it was assigned to.", title: "Are you sure you want to delete the sound \"#{@sound.name}\"?" }, :class => "btn btn-danger" do %>
          <span class="glyphicon glyphicon-trash"></span>
        <% end %>
      </span>
    </small>
    <br>
    <small>Sound</small>
  </h1>
</div>


<div class="row">
  <%= render 'form' %>
  <div class="col-sm-2">
    <% unless @sound.new_record? %>
      <%= audio_tag @sound.source.url, :alt => "#{@sound.name}", :controls => true %>
    <% end %>
  </div>

  <div class="col-sm-10">
    <% unless @sound.new_record? %>
      <table class="table table-striped">
        <tr>
          <td>File Name:</td>
          <td><a href="<%= @sound_url %>" download><%= @sound.source_file_name %></a></td>
        </tr>
        <tr>
          <td>Created on:</td>
          <td><%= @sound.created_at.localtime.strftime("%d/%m/%y @ %I:%M %p") %></td>
        </tr>
        <tr>
          <td>Uploaded By:</td>
          <td><%= @sound.uploader.username %></td>
        </tr>
        <tr>
          <td>File Size:</td>
          <% if @sound.source_file_size >= 1048576 %>
            <td><%= (Float(@sound.source_file_size) / 1048576).round(1) %> MB</td>
          <% elsif @sound.source_file_size >= 1024 %>
            <td><%= (Float(@sound.source_file_size) / 1024).round(1) %> kB</td>
          <% else %>
            <td><%= @sound.source_file_size %> B</td>
          <% end %>
        </tr>
        <tr>
          <td>File Type:</td>
          <td><%= @sound.source_content_type %></td>
        </tr>
        <tr>
          <td>Stages:</td>
          <td>
            <%= render 'stages' %>
          </td>
        </tr>
        <tr>
          <td>Tags:</td>
          <td>
            <%= render 'tags' %>
          </td>
        </tr>
      </table>
    <% end %>
  </div>
</div>
