<table id = "mediatable" class="table table-striped">
  <thead>
    <tr>
      <th onclick = "sortTable(0)">Name</th>
      <th onclick = "sortTable(1)">Type</th>
      <th onclick = "sortTable(2)">Stages</th>
      <th onclick = "sortTable(3)">Tags</th>
      <th class="col-sm-1">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @media.each do |m| %>
      <tr>
        <td><%= link_to m.name, m %></td>
        <td><%= m.class.name %>
        <td class="text-muted">
        </td>
        <td>
          <% m.tags.each do |t| %>
            <%= render t %>
          <% end %>
        </td>
        <td class="col-sm-1">
          <span class="btn-group btn-group-sm">
            <%= link_to m, :method => :delete, :data => { confirm: "#{m.name} will be removed" }, :class => 'btn btn-sm btn-danger' do %>
              <span class="glyphicon glyphicon-trash"></span>
            <% end %>
          </span>
        </td>
      </tr>
    <% end %>
  </tbody>
  <script> 
        function sortTable(n) {
          var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
          table = document.getElementById("mediatable");

          switching = true;

          dir = "asc"; 

        while (switching) {

          switching = false;
          rows = table.getElementsByTagName("TR");

          for (i = 1; i < (rows.length - 1); i++) {

            shouldSwitch = false;

            x = rows[i].getElementsByTagName("TD")[n];
            y = rows[i + 1].getElementsByTagName("TD")[n];

            if (dir == "asc") {
              if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                shouldSwitch= true;
                break;
              }
            } else if (dir == "desc") {
              if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                shouldSwitch= true;
                break;
              }
            }
          }
          if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
            switchcount ++;      
          } else {            
            if (switchcount == 0 && dir == "asc") {
              dir = "desc";
              switching = true;
            }
          }
        }
      }
</script>
</table>

